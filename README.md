<font size="4">
<h1 align="center">Сайт для рассылки электронных писем SendEmail</h1>

---

Данный сайт предлагает вам возможность автоматической рассылки
электронных писем большому числу пользователей.

Основные функции сайта:
* Создание рассылок с выбором времени запуска и периодом рассылок.
* Создание клиентов и писем.
* Просмотр отчетов по каждой рассылке
* Модерация рассылок с помощью менеджера.
* Ведение блога с помощью контент-менеджера.
* Полное администрирование сайта.

<h2 align="center">Установка</h2>

---

Для установки данного проекта на ваш компьютер/сервер нужно выполнить
следующий порядок действий:

1. Клонировать репозиторий на ваш компьютер командой 
```git clone https://github.com/Lemur3547/Cursovaya_6.git```
2. Установить все зависимости командой ```poetry install```  
&#9888; Примечание: используйте версию python 3.10 или выше.
3. Скопируйте файл .env.sample, переименуйте в .env и заполните все поля
в нем
4. Примените миграции командой ```python manage.py migrate```
5. Создайте суперпользователя командой ```python manage.py csu```
6. Примените фикстуру с правами и группами командой 
```python manage.py loaddata permissions.json```
7. (не обязательно) Примените фикстуру с постами для блога командой 
```python manage.py loaddata blogdata.json```
8. Запустите периодические задачи командой ```python manage.py crontab add```  
&#9888; Примечание: crontab работает только на Linux/MacOS.  
&#9888; Примечание: crontab проверяет рассылки раз в минуту, 
но если вы хотите сделать это вне очереди, выполните команду 
```python manage.py check_mailings```

Поздравляем! Теперь можно запустить сайт с помощью команды 
```python manage.py runserver```.

<h2 align="center">Использование</h2>

---

Чтобы начать рассылать свои письма, вам нужно выполнить несколько шагов:
1. Перейдите на вкладку Письма и создайте письмо, которое вы хотите разослать.
2. Перейдите на вкладку Клиенты и создайте клиентов, кому вы хотите рассылать свои письма
3. На вкладке Рассылки создайте свою рассылку, при этом укажите время начала
рассылки, выберите периодичность, список клиентов и письмо, которое будут получать ваши клиенты.

Вы создали рассылку! Она автоматически активируется при достижении времени, 
указанного при создании рассылки и будет рассылаться с указанной периодичностью.

Если вы хотите завершить рассылку, перейдите на страницу информации о рассылки, и там будет кнопка
"Отключить рассылку". При необходимости рассылку можно возобновить, нажав на появившуюся
на этом месте кнопку.

<h2 align="center">Права пользователей</h2>

---

На нашем сервере есть несколько разных ролей для пользователей.

Обычный пользователь - роль, которую имеют все пользователи, пользующиеся нашим сайтом.

Пользователь имеет стандартный набор прав:
* Создание клиентов, писем, рассылок.
* Просмотр своих клиентов, писем, рассылок. 
* Изменение своих клиентов, писем, рассылок.
* Удаление своих клиентов, писем, рассылок.
* Просмотр отчетов по своим рассылкам.

Менеджер - специальный пользователь, занимающийся модерацией рассылок. Данная роль выдается
вышестоящим пользователем, имеющим на то права.

Помимо стандартного набора прав менеджер имеет следующие права:
* Доступ в панель менеджера.
* Просмотр всех рассылок.
* Возможность останавливать любые рассылки.
* Просмотр списка всех пользователей.
* Блокировка любых пользователей.

Контент-менеджер - пользователь, отвечающий за публикацию постов в блоге.
Он не имеет прав обычного менеджера, но имеет свой собственный набор прав:
* Создание поста
* Редактирование поста
* Удаление поста

Поскольку наш сайт не имеет своего интерфейса работы с постами, то контент 
менеджерам нужно разрешить заходить в админку. Данное разрешение нельзя установить для группы, 
поэтому оно устанавливается вручную для каждого пользователя.

Суперпользователь - высшая роль на сервисе. Имеет доступ ко всему функционалу в админке.
Назначает роли другим пользователям.

</font>